{"ast":null,"code":"import React,{useState}from\"react\";import Modal from\"./modal.js\";import\"./listing.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const stringifiedUser=window.localStorage.getItem(\"userInfo\");const currentUser=JSON.parse(stringifiedUser);const Box=_ref=>{let{info,onRemove,onClick}=_ref;const imageUrl=info.image?URL.createObjectURL(info.image):\"placeholder-image-url\";return/*#__PURE__*/_jsxs(\"div\",{className:\"listings-box\",onClick:()=>onClick(info),children:[/*#__PURE__*/_jsx(\"div\",{className:\"listings-box-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\".listings-box-content-header\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\".listings-box-content-header-name\",children:info.name}),info.image&&/*#__PURE__*/_jsx(\"img\",{src:imageUrl,alt:\"Uploaded content\",className:\"img\"})]})}),/*#__PURE__*/_jsx(\"button\",{className:\"listings-box-btn\",onClick:e=>{e.stopPropagation();// Prevent click from bubbling up to the box click\nonRemove();},children:\"Remove\"})]});};const Listing=()=>{const[boxes,setBoxes]=useState([]);const initialBoxInfo={name:\"\",contact:\"\",description:\"\",image:null};const[newBoxInfo,setNewBoxInfo]=useState(initialBoxInfo);const[showModal,setShowModal]=useState(false);const[selectedBox,setSelectedBox]=useState(null);const handleFormSubmit=boxData=>{const newBox={id:boxes.length+1,info:boxData};setBoxes([...boxes,newBox]);setNewBoxInfo(initialBoxInfo);setShowModal(false);setNewBoxInfo(initialBoxInfo);};const handleBoxClick=boxInfo=>{setSelectedBox(boxInfo);setShowModal(true);};const removeBox=id=>{setBoxes(boxes.filter(box=>box.id!==id));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"listings-box-list\",children:boxes.map(box=>/*#__PURE__*/_jsx(Box,{info:box.info,onRemove:()=>removeBox(box.id),onClick:handleBoxClick},box.id))}),/*#__PURE__*/_jsx(\"button\",{className:\"listings-add-box-button\",title:\"Add new listing\",onClick:()=>{setShowModal(true);setSelectedBox(null);},children:/*#__PURE__*/_jsx(\"div\",{className:\"plus-text\",children:\"+\"})}),showModal&&/*#__PURE__*/_jsx(Modal,{onModalClose:()=>{setShowModal(false);setSelectedBox(null);},onSubmit:handleFormSubmit,newBoxInfo:newBoxInfo,setNewBoxInfo:setNewBoxInfo,content:selectedBox,owner:currentUser})]});};export default Listing;","map":{"version":3,"names":["React","useState","Modal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","stringifiedUser","window","localStorage","getItem","currentUser","JSON","parse","Box","_ref","info","onRemove","onClick","imageUrl","image","URL","createObjectURL","className","children","name","src","alt","e","stopPropagation","Listing","boxes","setBoxes","initialBoxInfo","contact","description","newBoxInfo","setNewBoxInfo","showModal","setShowModal","selectedBox","setSelectedBox","handleFormSubmit","boxData","newBox","id","length","handleBoxClick","boxInfo","removeBox","filter","box","map","title","onModalClose","onSubmit","content","owner"],"sources":["/Users/udit/Documents/GitHub/rentgmu/frontend/src/Components/main_page/listings/listing.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport Modal from \"./modal.js\";\nimport \"./listing.css\";\n\nconst stringifiedUser = window.localStorage.getItem(\"userInfo\");\nconst currentUser = JSON.parse(stringifiedUser);\n\nconst Box = ({ info, onRemove, onClick }) => {\n  const imageUrl = info.image\n    ? URL.createObjectURL(info.image)\n    : \"placeholder-image-url\";\n  return (\n    <div className=\"listings-box\" onClick={() => onClick(info)}>\n      <div className=\"listings-box-content\">\n        <div className=\".listings-box-content-header\">\n          <h3 className=\".listings-box-content-header-name\">{info.name}</h3>\n          {info.image && (\n            <img src={imageUrl} alt=\"Uploaded content\" className=\"img\" />\n          )}\n        </div>\n        {/* <p className=\".listings-box-content-description\">\n          Description: {info.description}\n        </p>\n        <p className=\".listings-box-content-payment\">\n          Payments: {info.payments}\n        </p> */}\n      </div>\n      <button\n        className=\"listings-box-btn\"\n        onClick={(e) => {\n          e.stopPropagation(); // Prevent click from bubbling up to the box click\n          onRemove();\n        }}\n      >\n        Remove\n      </button>\n    </div>\n  );\n};\n\nconst Listing = () => {\n  const [boxes, setBoxes] = useState([]);\n  const initialBoxInfo = {\n    name: \"\",\n    contact: \"\",\n    description: \"\",\n    image: null,\n  };\n  const [newBoxInfo, setNewBoxInfo] = useState(initialBoxInfo);\n  const [showModal, setShowModal] = useState(false);\n  const [selectedBox, setSelectedBox] = useState(null);\n\n  const handleFormSubmit = (boxData) => {\n    const newBox = {\n      id: boxes.length + 1,\n      info: boxData,\n    };\n    setBoxes([...boxes, newBox]);\n    setNewBoxInfo(initialBoxInfo);\n    setShowModal(false);\n    setNewBoxInfo(initialBoxInfo);\n  };\n\n  const handleBoxClick = (boxInfo) => {\n    setSelectedBox(boxInfo);\n    setShowModal(true);\n  };\n\n  const removeBox = (id) => {\n    setBoxes(boxes.filter((box) => box.id !== id));\n  };\n\n  return (\n    <>\n      <div className=\"listings-box-list\">\n        {boxes.map((box) => (\n          <Box\n            key={box.id}\n            info={box.info}\n            onRemove={() => removeBox(box.id)}\n            onClick={handleBoxClick}\n          />\n        ))}\n      </div>\n      <button\n        className=\"listings-add-box-button\"\n        title=\"Add new listing\"\n        onClick={() => {\n          setShowModal(true);\n          setSelectedBox(null);\n        }}\n      >\n        <div className=\"plus-text\">+</div>\n      </button>\n      {showModal && (\n        <Modal\n          onModalClose={() => {\n            setShowModal(false);\n            setSelectedBox(null);\n          }}\n          onSubmit={handleFormSubmit}\n          newBoxInfo={newBoxInfo}\n          setNewBoxInfo={setNewBoxInfo}\n          content={selectedBox}\n          owner={currentUser}\n        />\n      )}\n    </>\n  );\n};\n\nexport default Listing;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}